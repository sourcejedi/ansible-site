# See also test-nspawn-debian

- hosts: test-nspawn-deb
  roles:
    # ansible works.
    # ensure subsequent software installs on stable use security repos.
    - repos-apt
    - role: repos-debian-jessie-backports
      when: repos_apt == 'debian-jessie'

    # ensure subsequent changes to /etc are tracked
    # (including software installs)
    - sourcejedi.etckeeper

    # make a bootable nspawn container, even from minimal debootstrap
    - debian-on-nspawn
    - debian-on-nspawn-dhcp
 
    - users

# TODO: apt-get in ssh session:
#
#perl: warning: Setting locale failed.
#perl: warning: Please check that your locale settings:
#	LANGUAGE = (unset),
#	LC_ALL = (unset),
#	LANG = "en_GB.UTF-8"
#    are supported and installed on your system.
#perl: warning: Falling back to the standard locale ("C").
#locale: Cannot set LC_CTYPE to default locale: No such file or directory
#locale: Cannot set LC_MESSAGES to default locale: No such file or directory
#locale: Cannot set LC_ALL to default locale: No such file or directory
